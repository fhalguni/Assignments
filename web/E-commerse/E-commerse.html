<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>E-commerse Page</title>
    <link rel="stylesheet" href="EStyle.css" />
    <!-- <link rel="stylesheet" href="./newStyle.css" /> -->
  </head>
  <body>
    <div class="container" id="1">
      <nav>
        <img class="logo" src="e-commerse.png" alt="" />
        <div class="list">
          <ul>
            <li><a href="#1">Home</a></li>
            <li><a href="#2">Products</a></li>
            <li><a href="#3">contact us</a></li>
            <li><a href="registration.html">Registration Page</a></li>
            <li>
              <div
                class="add-product"
                style="z-index: 999; background-color: black"
              >
                <button id="addProductButton">Add Product</button>
                <div
                  id="addProductForm"
                  class="centered-form"
                  style="display: none"
                >
                  <h2>Add New Product</h2>

                  <form id="productForm">
                    <label for="productName">Name:</label>
                    <input
                      type="text"
                      id="productName"
                      name="productName"
                      required
                    /><br />

                    <label for="productCategory">Category:</label>
                    <select
                      id="productCategory"
                      name="productCategory"
                      required
                    >
                      <option value="electronics">Electronics</option>
                      <option value="food">Grocery</option>
                      <option value="clothing">Clothing</option></select
                    ><br />

                    <label for="productPrice">Price:</label>
                    <input
                      type="number"
                      id="productPrice"
                      name="productPrice"
                      required
                    /><br />

                    <label for="productRating">Rating:</label>
                    <input
                      type="number"
                      id="productRating"
                      name="productRating"
                      step="0.1"
                      required
                    /><br />

                    <label for="productImage">Image URL:</label>
                    <input
                      type="text"
                      id="productImage"
                      name="productImage"
                      required
                    /><br />

                    <button type="submit">Add Product</button>
                  </form>
                </div>
              </div>
            </li>
          </ul>
        </div>
      </nav>

      <div class="homeContent">
        <h2 style="color: blue">E-commerce</h2>
        <p>
          Welcome !!!, your one-stop shop for fashion, electronics, home
          essentials, and more, with unbeatable prices and top-notch customer
          service!
        </p>
      </div>
    </div>

    <div class="products" id="2">
      <div class="heading">
        <h1
          class="productList"
          style="width: 100dvw; display: grid; place-items: center"
        >
          Product List
        </h1>
      </div>
      <div class="productSort">
        <select name="" id="button">
          <option value="1">Electronics</option>
          <option value="2">Grocery</option>
          <option value="3">Clothing</option>
        </select>
      </div>

      <div class="products" id="2">
        <div class="sidebar">
          <div class="filter-section">
            <h2>Filters</h2>
            <div class="filter-category">
              <label for="categoryFilter">Category:</label>
              <select id="categoryFilter">
                <option value="all">All</option>
                <option value="electronics">Electronics</option>
                <option value="food">Grocery</option>
                <option value="clothing">Clothing</option>
              </select>
            </div>
            <div class="filter-range">
              <label for="rangeFilter">Price Range:</label>
              <select id="rangeFilter">
                <option value="all">Select all price range</option>
                <option value="100-200">100-200</option>
                <option value="201-300">201-300</option>
                <option value="301-400">301-400</option>
                <option value="401-500">401-500</option>
              </select>
            </div>
          </div>
          <div class="cart-section">
            <h2>Cart</h2>
            <ul id="cartItems"></ul>
            <p>Total Price: $<span id="totalPrice">0</span></p>
          </div>
        </div>
        <div class="main-card">
          <div class="card electronics">
            <div class="p1">
              <center>
                <img src="laptop.jpg" alt="Laptop" />
                <div class="content">
                  <p>name: <span>Laptop</span></p>
                  <p>category: Electronics</p>
                  <p>price: $100</p>
                  <p>rating: 5</p>
                  <button class="AddToCart">Add to cart</button>
                </div>
              </center>
            </div>
            <div class="p1 clothing">
              <center>
                <img src="onePiece.jpg" alt="One Piece" />
                <div class="content">
                  <p>name: <span>One Piece</span></p>
                  <p>category: Clothing</p>
                  <p>price: $50</p>
                  <p>rating: 4.5</p>
                  <button class="AddToCart">Add to cart</button>
                </div>
              </center>
            </div>
            <div class="p1 electronics">
              <center>
                <img src="smartTV.jpg" alt="Smart TV" />
                <div class="content">
                  <p>name: <span>Smart TV</span></p>
                  <p>category: Electronics</p>
                  <p>price: $300</p>
                  <p>rating: 4.8</p>
                  <button class="AddToCart">Add to cart</button>
                </div>
              </center>
            </div>
          </div>
          <div class="card1">
            <div class="p1 clothing">
              <center>
                <img src="shoes.jpg" alt="Shoes" />
                <div class="content">
                  <p>name: <span>Shoes</span></p>
                  <p>category: Clothing</p>
                  <p>price: $60</p>
                  <p>rating: 4.6</p>
                  <button class="AddToCart">Add to cart</button>
                </div>
              </center>
            </div>
            <div class="p1 food">
              <center>
                <img src="oats.jpg" style="height: 200px" alt="Oats" />
                <div class="content">
                  <p>name: <span>Oats</span></p>
                  <p>category: Food</p>
                  <p>price: $10</p>
                  <p>rating: 4.7</p>
                  <button class="AddToCart">Add to cart</button>
                </div>
              </center>
            </div>
            <div class="p1 food">
              <center>
                <img src="Aata.jpg" style="height: 50%" alt="Aata" />
                <div class="content">
                  <p>name: <span>Aata</span></p>
                  <p>category: Food</p>
                  <p>price: $20</p>
                  <p>rating: 4.8</p>
                  <button class="AddToCart">Add to cart</button>
                </div>
              </center>
            </div>
          </div>
        </div>
        <!-- Add Product Section -->
      </div>
    </div>

    <div class="third" id="3">
      <div class="form">
        <div class="div">
          <h1 class="h1">Contact us</h1>
          <div class="email">
            <label for="email">Email:</label>
            <input type="email" placeholder="Enter Email here..." />
          </div>
          <div class="message">
            <label for="Message">Message:</label><br />
            <textarea
              name=""
              id=""
              maxlength="200"
              rows="5"
              cols="50"
              placeholder="Enter any message..."
            ></textarea>
          </div>
          <button class="button">Send</button>
        </div>
      </div>
    </div>

    <div class="footer">
      <p class="copy-write">&copy; Ashwini Patil</p>
    </div>

    <script>
      document
        .getElementById("categoryFilter")
        .addEventListener("change", function () {
          var selectedCategory = this.value;
          var cards = document.querySelectorAll(".p1");

          cards.forEach(function (card) {
            if (selectedCategory === "all") {
              card.style.display = "block";
            } else {
              if (card.classList.contains(selectedCategory)) {
                card.style.display = "block";
              } else {
                card.style.display = "none";
              }
            }
          });
        });

      document
        .getElementById("rangeFilter")
        .addEventListener("change", function () {
          var selectedRange = this.value;
          var cards = document.querySelectorAll(".p1");

          cards.forEach(function (card) {
            var priceText = card.querySelector(
              ".content p:nth-child(3)"
            ).innerText;
            var price = parseFloat(priceText.replace("price: $", ""));

            if (selectedRange === "all") {
              card.style.display = "block";
            } else {
              var range = selectedRange.split("-");
              var min = parseFloat(range[0]);
              var max = parseFloat(range[1]);

              if (price >= min && price <= max) {
                card.style.display = "block";
              } else {
                card.style.display = "none";
              }
            }
          });
        });

      const cartItems = document.getElementById("cartItems");
      const totalPriceEl = document.getElementById("totalPrice");
      let totalPrice = 0;

      document.querySelectorAll(".AddToCart").forEach((button) => {
        button.addEventListener("click", () => {
          const product = button.closest(".p1");
          const name = product.querySelector("span").textContent.trim();
          let priceText = product
            .querySelector("p:nth-child(3)")
            .textContent.trim();

          let priceMatch = priceText.match(/\$\d+/);
          if (priceMatch) {
            let price = parseFloat(priceMatch[0].replace("$", "").trim());

            console.log("Product:", name);
            console.log("Price Text:", priceText);
            console.log("Parsed Price:", price);

            if (!isNaN(price)) {
              var cartItem = document.createElement("li");
              cartItem.className = "cart-item";
              cartItem.innerHTML = `${name} - $${price} <button class="removeFromCart">Remove</button>`;
              document.getElementById("cartItems").appendChild(cartItem);

              totalPrice += price;
              totalPriceEl.innerText = totalPrice;
            } else {
              console.error("Price is not a number:", priceText);
            }
          } else {
            console.error("Price could not be extracted:", priceText);
          }
        });
      });

      document
        .getElementById("addProductButton")
        .addEventListener("click", function () {
          document.getElementById("addProductForm").style.display = "block";
        });

      document
        .getElementById("addProductButton")
        .addEventListener("click", function () {
          document.getElementById("addProductForm").style.display = "block";
        });

      document
        .getElementById("addProductButton")
        .addEventListener("click", function () {
          document.getElementById("addProductForm").style.display = "block";
        });

      document
        .getElementById("productForm")
        .addEventListener("submit", function (e) {
          e.preventDefault();

          var name = document.getElementById("productName").value;
          var category = document.getElementById("productCategory").value;
          var price = document.getElementById("productPrice").value;
          var rating = document.getElementById("productRating").value;
          var image = document.getElementById("productImage").value;

          var productHtml = `
        <div class="p1 ${category}">
          <center>
            <img src="${image}" alt="${name}">
            <div class="content">
              <p>name: <span>${name}</span></p>
              <p>category: ${category}</p>
              <p>price: $${price}</p>
              <p>rating: ${rating}</p>
              <button class="AddToCart">Add to cart</button>
            </div>
          </center>
        </div>
      `;

          document.querySelector(".main-card").innerHTML += productHtml;
          document.getElementById("addProductForm").style.display = "none";
          document.getElementById("productForm").reset();
        });

      document.addEventListener("click", function (e) {
        if (e.target && e.target.classList.contains("removeFromCart")) {
          var cartItem = e.target.closest(".cart-item");
          var priceText = cartItem.innerText.split("- $")[1].split(" ")[0];
          var price = parseInt(priceText);

          cartItem.remove();
          totalPrice = totalPrice - price;
          var totalPriceElement = document.getElementById("totalPrice");
          totalPriceElement.innerText = totalPrice.toFixed(2);
        }
      });
      function updateTotalPrice(amount) {
        var totalPriceElement = document.getElementById("totalPrice");
        var currentTotal = parseInt(totalPriceElement.innerText);
        totalPriceElement.innerText = (currentTotal + amount).toFixed(2);
      }
    </script>
  </body>
</html>
